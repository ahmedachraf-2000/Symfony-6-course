{% extends 'base.html.twig' %}

{% block title %}Blog · MyBlog
{% endblock %}

{% block body %}
	<main class="max-w-7xl mx-auto px-6 md:px-10 lg:px-16 py-16 bg-white">

		{% if posts is empty %}
			<p class="text-center text-zinc-500 text-sm mt-24">No posts yet.</p>
		{% else %}

			<!-- Create New Blog Button -->
			<div class="flex justify-end mb-10">
				<a href="/blogs/create" class="inline-flex items-center gap-2 px-5 py-2.5 border border-blue-500 text-blue-600 hover:bg-blue-600 hover:text-white rounded-xl text-sm font-medium transition-all duration-200 shadow-sm hover:shadow-md">
					<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewbox="0 0 24 24" stroke="currentColor">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
					</svg>
					Create New Blog
				</a>
			</div>

			<!-- Blog Grid -->
			<div class="grid gap-10 sm:grid-cols-2 lg:grid-cols-3">
				{% for post in posts %}
					<article class="group relative flex flex-col overflow-hidden rounded-2xl border border-zinc-200 bg-white shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-300">

						{% if post.imagePath %}
							<a href="{{ path('blog_show', {slug: post.slug}) }}" class="block relative">
								<div class="relative overflow-hidden">
									<img src="{{ post.imagePath }}" alt="{{ post.title }}" class="w-full aspect-[16/9] object-cover transition-transform duration-500 group-hover:scale-105" loading="lazy">
									<div class="absolute inset-0 bg-gradient-to-t from-black/40 via-black/0 opacity-0 group-hover:opacity-100 transition-opacity"></div>
								</div>
								<span class="absolute bottom-3 left-3 text-[11px] font-medium bg-white/90 backdrop-blur px-2 py-1 rounded-full border border-white/70 text-zinc-800 shadow">
									{{ post.publishedAt ? post.publishedAt|date('M d, Y') : 'Draft' }}
								</span>
							</a>
						{% endif %}

						<div class="flex flex-col flex-grow p-6">
							<h2 class="text-lg font-semibold text-zinc-900 leading-snug mb-2">
								<a href="{{ path('blog_show', {slug: post.slug}) }}" class="hover:text-blue-600 transition-colors line-clamp-2">
									{{ post.title }}
								</a>
							</h2>

							<div class="flex flex-wrap items-center text-xs text-zinc-500 mb-3">
								{% if not post.imagePath %}
									<time datetime="{{ post.publishedAt ? post.publishedAt|date('c') : '' }}" class="text-zinc-600">
										{{ post.publishedAt ? post.publishedAt|date('M d, Y') : 'Unpublished' }}
									</time>
								{% endif %}
								{% if post.author %}
									<span class="mx-1 text-zinc-300">•</span>
									<span class="font-medium text-zinc-700">{{ post.author.name }}</span>
								{% endif %}
							</div>

							<p class="text-sm text-zinc-600 leading-relaxed line-clamp-3 flex-grow">
								{{ post.content|striptags|slice(0, 220) ~ (post.content|length > 220 ? '…' : '') }}
							</p>

							<div class="mt-6 flex items-center justify-between">
								<a href="{{ path('blog_show', {slug: post.slug}) }}" class="text-sm font-medium text-blue-600 hover:underline inline-flex items-center gap-1">
									Read More
									<svg class="h-3.5 w-3.5 transition-transform group-hover:translate-x-1" viewbox="0 0 20 20" fill="currentColor" aria-hidden="true">
										<path d="M7.25 3.75a.75.75 0 0 1 0-1.5h7.5a.75.75 0 0 1 .75.75v7.5a.75.75 0 0 1-1.5 0V5.56l-9.22 9.22a.75.75 0 1 1-1.06-1.06l9.22-9.22H7.25z"/>
									</svg>
								</a>

								<span class="text-[11px] text-zinc-400 font-mono truncate max-w-[45%]" title="{{ post.slug }}">
									{{ post.slug }}
								</span>
							</div>
						</div>
					</article>
				{% endfor %}
			</div>

		{% endif %}
	</main>
{% endblock %}

